(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{1718:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Pt}});var r=n(7294),i=n(4433),c=n(6155),o=n(5683),a=n(1508),s=n(4656),l=n(219),u=n(2809),d=n(2658),h=n(2640),f=n(9602),x=n(5893),j=["icon","title"];function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=(0,f.ZP)(a.Z)((function(){return{display:"flex",flexDirection:"column",alignItems:"center"}})),Z=(0,f.ZP)((function(e){return(0,x.jsx)(d.Z,g({variant:"caption"},e))}))((function(e){var t=e.theme;return{height:t.spacing(2),lineHeight:t.spacing(2),whiteSpace:"nowrap"}})),m=function(e){var t=e.icon,n=e.title,r=(0,l.Z)(e,j);return(0,x.jsx)(h.Z,g({label:(0,x.jsxs)(v,{children:[t,(0,x.jsx)(Z,{children:n})]})},r))},b=function(e){var t=e.validate,n=e.children;return t?(0,x.jsx)(x.Fragment,{children:n}):null},y=n(2618),O=((0,f.ZP)(y.Z)((function(){return{flex:1,width:"100%",height:"100%"}})),(0,f.ZP)(y.Z)((function(){return{flex:1,width:"100%",overflowY:"hidden"}})),(0,f.ZP)(y.Z)((function(){return{flex:1,height:"100%",overflowX:"hidden"}}))),w=(0,f.ZP)(a.Z)((function(){return(0,u.Z)({display:"flex",flexGrow:1},"&[hidden]",{display:"none"})})),P=function(e){var t=e.value,n=e.index,r=e.children;return(0,x.jsx)(w,{role:"tabpanel",hidden:t!==n,children:(0,x.jsx)(O,{children:(0,x.jsx)(b,{validate:t===n,children:r})})})},C=n(4235),S=n(3720),k=n(4386),E=n(6447),D=n(4422),I=n(3789),M=n(318),H=n(1987),_=n(558),N=n(8811),R=function(e){var t=e.name,n=(0,D.eH)("\u6b63\u5728\u6311\u6218\u7684boss"),r=(0,D.eH)(t);return(0,x.jsx)(H.Z,{sx:0===String(n).indexOf(t)?{background:function(e){return e.palette.secondary.light}}:{},children:(0,x.jsxs)(a.Z,{display:"flex",alignItems:"center",px:2,minHeight:48,children:[(0,x.jsx)(d.Z,{sx:{flex:1},children:t}),(0,x.jsx)(d.Z,{sx:{color:"text.secondary"},children:Number(r||0)})]})})},L=function(e){var t=e.name;return(0,x.jsx)(R,{name:t})},T=function(){var e=(0,N.useGlobalState)("boss-list",[]),t=(0,M.Z)(e,2),n=t[0],i=t[1],c=(0,D.eH)("\u6b63\u5728\u6311\u6218\u7684boss");return(0,r.useEffect)((function(){c&&"\u65e0"!==c&&!1===(n||[]).includes(c)&&i([].concat((0,I.Z)(n||[]),[c]))}),[c]),(0,x.jsx)(x.Fragment,{children:(n||[]).map((function(e){return(0,x.jsx)(_.ZP,{item:!0,xs:4,children:(0,x.jsx)(L,{name:e})},e)}))})},W=n(6571),A=n(461),F=n(7425),J=n(1820),z=n(7720),G=n(5092),U=n(2440),X=n(576),Y=n(4212),B=n(8619),Q=n(9334),q=n(6446),K=n(7666),V=n(8487),$=n(3031),ee=n(5305),te=n(8285),ne={"\u9ed8\u8ba4":"",A:"A",B:"B",C:"C",D:"D",E:"E",F:"F",G:"G",H:"H",I:"I",J:"J"},re=function(e){var t=e.name,n=(0,D.eH)("\u94c3\u94db\u8bbe\u7f6e"),i=(0,D.eH)("\u94c3\u94db\u8ba1\u6570"),c=(0,D.eH)("\u5f53\u524d\u94c3\u94db"),o=(0,r.useMemo)((function(){return i?Object.entries(n[t]).reduce((function(e,t){var n=(0,M.Z)(t,2),r=(n[0],n[1]);return e+(i[r.name]||0)}),0):0}),[n,c,i]),s=(0,r.useMemo)((function(){var e=Object.entries(n[t]).find((function(e){var t=(0,M.Z)(e,2);t[0];return t[1].name===c.name}));return e?(0,x.jsx)(A.Z,{color:"primary",size:"small",label:e[0]}):null}),[n,c]),l=(0,r.useMemo)((function(){return Object.entries(n[t]).find((function(e){var t=(0,M.Z)(e,2);t[0];return t[1].enabled}))}),[n]),u=(0,r.useMemo)((function(){return s?function(e){return e.palette.secondary.light}:void 0===l?function(e){return e.palette.grey[400]}:void 0}),[s,l]);return(0,x.jsxs)(F.Z,{expandIcon:(0,x.jsx)(W.Z,{}),sx:{background:u},children:[(0,x.jsx)(d.Z,{sx:{width:150,flexShrink:0},children:t}),(0,x.jsx)(d.Z,{sx:{flex:1,color:"text.secondary"},children:o}),(0,x.jsx)(a.Z,{sx:{width:80,textAlign:"center",mr:1},children:s})]})},ie=function(e){var t=e.name,n=(0,r.useContext)(te.J).sendMessage,i=(0,D.eH)("\u94c3\u94db\u8bbe\u7f6e"),c=(0,D.eH)("\u94c3\u94db\u8ba1\u6570"),o=(0,r.useCallback)((function(e,r){return function(){n("mergeConfigSettings",{"\u94c3\u94db\u8bbe\u7f6e":(0,u.Z)({},t,(0,u.Z)({},e,{enabled:!r}))})}}),[t,i,n]),s=(0,r.useCallback)((function(e){return function(r){n("mergeConfigSettings",{"\u94c3\u94db\u8bbe\u7f6e":(0,u.Z)({},t,(0,u.Z)({},e,{party:r.target.value}))})}}),[t,i,n]),l=function(e){e.stopPropagation()};return i[t]?(0,x.jsxs)(J.Z,{children:[(0,x.jsx)(re,{name:t}),(0,x.jsx)(z.Z,{}),(0,x.jsx)(G.Z,{sx:{p:1},children:(0,x.jsx)(U.Z,{sx:{p:0,width:"100%",bgcolor:"background.paper"},children:Object.entries(i[t]).map((function(e){var t=(0,M.Z)(e,2),n=t[0],r=t[1],i=r.name,u=r.party,h=r.enabled;return(0,x.jsx)(X.ZP,{secondaryAction:(0,x.jsx)(Y.Z,{edge:"end",onChange:o(n,h),checked:h}),disablePadding:!0,children:(0,x.jsx)(B.Z,{sx:{pl:1},onClick:o(n,h),children:(0,x.jsx)(Q.Z,{primary:(0,x.jsxs)(a.Z,{display:"flex",alignItems:"center",children:[(0,x.jsx)(d.Z,{sx:{width:150,flexShrink:0},children:n}),(0,x.jsx)(d.Z,{sx:{flex:1,color:"text.secondary"},children:c?c[i]:""}),(0,x.jsxs)(q.Z,{size:"small",sx:{width:80},children:[(0,x.jsx)(K.Z,{shrink:!0,children:"\u961f\u4f0d"}),(0,x.jsx)(V.Z,{input:(0,x.jsx)($.Z,{notched:!0,label:"\u961f\u4f0d"}),value:u,onClick:l,onChange:s(n),displayEmpty:!0,children:Object.entries(ne).map((function(e){var t=(0,M.Z)(e,2),n=t[0],r=t[1];return(0,x.jsx)(ee.Z,{value:r,children:n},n)}))})]})]})})})},i)}))})})]}):null},ce=function(){var e=(0,D.eH)("\u94c3\u94db\u8bbe\u7f6e");return(0,x.jsx)(x.Fragment,{children:Object.keys(e||{}).map((function(e){return(0,x.jsx)(_.ZP,{item:!0,xs:4,children:(0,x.jsx)(ie,{name:e})},e)}))})},oe=function(){var e=(0,D.eH)("\u94c3\u94db\u8bbe\u7f6e");return Object.keys(e||{}).length?(0,x.jsx)(ce,{}):(0,x.jsx)(T,{})},ae=n(7676),se=n(3160),le=n(9041),ue=n(8629),de=["label"];function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xe=[255,158,25],je=[49,194,181],pe=[49,53,49],ge=(0,f.ZP)(H.Z)((function(){return(0,u.Z)({},"&.".concat(se.Z.root),{display:"inline-flex"})})),ve=(0,f.ZP)(a.Z)((function(e){var t=e.theme;return{display:"flex",flexDirection:"column",justifyContent:"space-evenly",padding:t.spacing(2),width:t.spacing(24)}})),Ze=(0,f.ZP)(le.Z)((function(e){return{height:e.theme.spacing(1)}})),me=function(e){var t=e.label,n=(0,l.Z)(e,de);return(0,x.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,x.jsx)(d.Z,{variant:"body2",noWrap:!0,children:t}),(0,x.jsx)(a.Z,{sx:{flex:1,mx:1},children:(0,x.jsx)(Ze,fe({variant:"determinate"},n))}),void 0!==n.value&&n.value>=0&&(0,x.jsx)(d.Z,{variant:"caption",color:"text.secondary",children:"".concat(n.value,"%")})]})},be=function(){var e=(0,D.eH)("\u5f53\u524d\u94c3\u94db"),t=(0,D.Qy)("server"),n=(0,r.useState)(-1),i=n[0],c=n[1],o=(0,r.useState)(-1),a=o[0],s=o[1],l=(0,r.useState)(null),u=l[0],d=l[1],h=(0,ae.ZP)(u),f=h.lastMessage,j=h.getWebSocket,p=(0,r.useCallback)((function(){e&&"{}"!==JSON.stringify(e)||d(t?"ws://".concat(t,"/stream"):null)}),[e,t]);return(0,ue.Z)(p,1e4),(0,r.useEffect)((function(){return p(),function(){d(null)}}),[p]),(0,r.useEffect)((function(){if(f){var e=j();e&&e.close();var t=new Image;t.src=URL.createObjectURL(f.data),t.onload=function(){!function(e,t){var n=document.createElement("canvas"),r=n.getContext("2d");if(r){if(720===e.width&&1280===e.height)n.width=307,n.height=1,r.drawImage(e,95,23,n.width,n.height,0,0,n.width,n.height);else{if(810!==e.width||1440!==e.height)return;n.width=344,n.height=1,r.drawImage(e,107,26,n.width,n.height,0,0,n.width,n.height)}for(var i=r.getImageData(0,0,n.width,n.height),c={left:0,right:0},o=0;o<i.data.length;o+=4)if(i.data[o]===xe[0]&&i.data[o+1]===xe[1]&&i.data[o+2]===xe[2])c.left+=1;else{if(i.data[o]!==pe[0]||i.data[o+1]!==pe[1]||i.data[o+2]!==pe[2])return;c.right+=1}t(Math.round(c.left/(c.left+c.right||1)*1e3)/10)}}(t,c),function(e,t){var n=document.createElement("canvas"),r=n.getContext("2d");if(r){if(720===e.width&&1280===e.height)n.width=92,n.height=92,r.drawImage(e,0,104,n.width,n.height,0,0,n.width,n.height);else{if(810!==e.width||1440!==e.height)return;n.width=102,n.height=102,r.drawImage(e,0,117,n.width,n.height,0,0,n.width,n.height)}for(var i=r.getImageData(0,0,n.width,n.height),c=n.width-2,o=Math.PI/c,a={left:0,right:0},s=0;s<=90;s+=1){var l=Math.round(Math.cos(s*o)*c),u=Math.round(Math.sin(s*o)*c);if(l>=0&&u>=0){var d=4*n.width*l+4*u;if(i.data[d]===je[0]&&i.data[d+1]===je[1]&&i.data[d+2]===je[2])a.left+=1;else{if(i.data[d]!==pe[0]||i.data[d+1]!==pe[1]||i.data[d+2]!==pe[2])return;a.right+=1}}}t(Math.round(a.left/(a.left+a.right||1)*1e3)/10)}}(t,s),URL.revokeObjectURL(t.src)},d(null)}}),[f]),(0,x.jsx)(ge,{children:(0,x.jsxs)(ve,{children:[(0,x.jsx)(me,{label:"\u4f53\u529b",variant:i<0?"indeterminate":"determinate",color:i<100?"primary":"secondary",value:i}),(0,x.jsx)(me,{label:"\u7ecf\u9a8c",variant:a<0?"indeterminate":"determinate",color:a<100?"primary":"secondary",value:a})]})})},ye=(0,f.ZP)(H.Z)((function(){return(0,u.Z)({},"&.".concat(se.Z.root),{display:"inline-flex"})})),Oe=(0,f.ZP)(a.Z)((function(e){var t=e.theme;return{display:"flex",flexDirection:"column",justifyContent:"space-between",padding:t.spacing(2),width:t.spacing(24)}})),we=function(){var e=(0,r.useContext)(te.J).sendMessage,t=(0,D.eH)("currentTargets"),n=(0,D.Gd)(),i=(0,M.Z)(n,1)[0];return(0,x.jsx)(ye,{children:(0,x.jsxs)(Oe,{children:[(0,x.jsx)(d.Z,{variant:"h6",children:"\u5f53\u524d\u4efb\u52a1"}),t&&i&&(0,x.jsx)(V.Z,{size:"small",value:t,onChange:function(t){e("changeTargets",t.target.value)},children:i.map((function(e){return(0,x.jsx)(ee.Z,{value:e,children:e},e)}))})]})})},Pe=n(3543),Ce=n(507),Se=n(6878),ke=function(){var e=(0,Se.e)("isDebug"),t=(0,r.useMemo)((function(){return e||!1}),[e]);return(0,x.jsx)(b,{validate:t,children:(0,x.jsx)(Ce.Z,{title:"\u8c03\u8bd5\u6a21\u5f0f",children:(0,x.jsx)(Pe.Z,{})})})},Ee=n(4356),De=n(6761),Ie=n(5295),Me=n(8515),He=n(6867),_e=n(9490),Ne=(0,f.ZP)(a.Z)((function(e){var t=e.theme;return{display:"flex",alignItems:"center",padding:t.spacing(0,1.5),borderWidth:"0 0 1px",borderStyle:"solid",borderColor:t.palette.divider}})),Re=function(e){var t=e.index,n=e.style,r=(0,D.eM)(),i=(0,M.Z)(r,1)[0];if(i&&t<i.length){var c=i[t],o=c.time,a=c.message;return(0,x.jsx)(Ce.Z,{title:_e.ou.fromSeconds(o).toLocaleString(_e.ou.DATETIME_MED_WITH_SECONDS),children:(0,x.jsx)(Ne,{style:n,sx:t%2===0?{background:function(e){return e.palette.grey[100]}}:{},children:(0,x.jsx)(d.Z,{variant:"body2",noWrap:!0,children:a})},t)})}return null},Le=function(){var e=(0,D.eM)(),t=(0,M.Z)(e,2),n=t[0],r=t[1];return(0,x.jsxs)(Ie.Z,{children:[(0,x.jsx)(Me.Z,{action:(0,x.jsx)(Ce.Z,{title:"\u6e05\u7a7a",children:(0,x.jsx)(He.Z,{onClick:function(){r([])},children:(0,x.jsx)(De.Z,{})})}),title:"\u65e5\u5fd7"}),(0,x.jsx)(z.Z,{}),(0,x.jsx)(Ee.t7,{className:"List",width:"100%",height:400,itemCount:n?n.length:0,itemSize:40,children:Re})]})},Te=n(8999),We=n(6634),Ae=["className"];function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ze=(0,f.ZP)(a.Z)((function(e){var t=e.theme;return{display:"flex",alignItems:"center",padding:t.spacing(0,1.5),borderWidth:"0 0 1px",borderStyle:"solid",borderColor:t.palette.divider}})),Ge=(0,f.ZP)((function(e){var t=e.className,n=(0,l.Z)(e,Ae);return(0,x.jsx)(Ce.Z,Je(Je({},n),{},{classes:{popper:t}}))}))((0,u.Z)({},"& .".concat(Te.Z.tooltip),{maxWidth:"none",maxHeight:400,whiteSpace:"pre",overflowY:"auto"})),Ue=function(e){return"object"===typeof e?(0,x.jsx)(Ge,{placement:"top",title:JSON.stringify(e,null,4),children:(0,x.jsx)(We.Z,{component:"button",variant:"body2",sx:{ml:1},children:"\u67e5\u770b"})}):(0,x.jsx)(a.Z,{ml:1,children:String(e)})},Xe=function(e){var t=e.index,n=e.style,r=(0,D._y)(),i=(0,M.Z)(r,1)[0];if(i&&t<Object.keys(i).length){var c=Object.keys(i)[t];return(0,x.jsx)(ze,{style:n,sx:t%2===0?{background:function(e){return e.palette.grey[100]}}:{},children:(0,x.jsxs)(d.Z,{component:"div",variant:"body2",noWrap:!0,sx:{display:"flex"},children:[c,": ",Ue(i[c])]})},t)}return null},Ye=function(){var e=(0,D._y)(),t=(0,M.Z)(e,1)[0];return(0,x.jsxs)(Ie.Z,{children:[(0,x.jsx)(Me.Z,{title:"\u6742\u9879"}),(0,x.jsx)(z.Z,{}),(0,x.jsx)(Ee.t7,{className:"List",width:"100%",height:400,itemCount:Object.keys(t||{}).length,itemSize:40,children:Xe})]})},Be=n(9149),Qe=function(){var e=(0,r.useContext)(te.J).sendMessage,t=(0,Se.e)("isRunning"),n=(0,r.useMemo)((function(){return t||!1}),[t]),i=(0,r.useCallback)((function(t,n){e(n?"startWFHelper":"stopWFHelper")}),[e]);return(0,x.jsx)(Ce.Z,{title:n?"\u542f\u7528":"\u6682\u505c",children:(0,x.jsx)(Be.Z,{color:"secondary",onChange:i,checked:n})})},qe=(0,f.ZP)(H.Z)((function(){return(0,u.Z)({},"&.".concat(se.Z.root),{display:"inline-flex"})})),Ke=(0,f.ZP)(a.Z)((function(e){var t=e.theme;return{display:"flex",flexDirection:"column",justifyContent:"space-between",padding:t.spacing(2),width:t.spacing(24)}})),Ve=function(){var e=(0,Se.e)("startTime"),t=(0,Se.e)("lastActionTime"),n=(0,r.useState)(null),i=n[0],c=n[1],o=(0,r.useState)(null),a=o[0],s=o[1];return(0,ue.Z)((function(){c((function(){return e?_e.ou.fromSeconds(Number(e)).toRelative():null})),s((function(){return t?_e.ou.fromSeconds(Number(t)).toRelative():null}))}),1e3,{immediate:!0}),(0,x.jsxs)(qe,{children:[(0,x.jsxs)(Ke,{children:[(0,x.jsx)(d.Z,{variant:"h6",children:"\u5f00\u59cb\u65f6\u95f4"}),(0,x.jsx)(d.Z,{children:e?_e.ou.fromSeconds(Number(e)).toLocaleString(_e.ou.DATETIME_MED_WITH_SECONDS):"-"}),(0,x.jsx)(d.Z,{variant:"caption",sx:{mt:1},children:i||"-"})]}),(0,x.jsx)(z.Z,{orientation:"vertical",flexItem:!0}),(0,x.jsxs)(Ke,{children:[(0,x.jsx)(d.Z,{variant:"h6",children:"\u6d3b\u8dc3\u65f6\u95f4"}),(0,x.jsx)(d.Z,{children:t?_e.ou.fromSeconds(Number(t)).toLocaleString(_e.ou.DATETIME_MED_WITH_SECONDS):"-"}),(0,x.jsx)(d.Z,{variant:"caption",sx:{mt:1},children:a||"-"})]})]})},$e=(0,f.ZP)(S.Z)((function(e){return{zIndex:e.theme.zIndex.drawer+1}})),et=(0,f.ZP)(k.Z)((function(e){return{padding:e.theme.spacing(0,2)}})),tt=function(){return(0,x.jsx)($e,{position:"static",children:(0,x.jsxs)(et,{disableGutters:!0,children:[(0,x.jsx)(d.Z,{variant:"h6",component:"div",sx:{flexGrow:1},children:"WFHelper"}),(0,x.jsxs)(E.Z,{direction:"row",alignItems:"center",spacing:2,children:[(0,x.jsx)(ke,{}),(0,x.jsx)(Qe,{})]})]})})},nt=(0,C.Z)((function(e){return{root:{display:"flex",flexDirection:"column",backgroundColor:e.palette.background.default,minWidth:e.breakpoints.values.md,height:"100%"},container:{display:"flex",flex:1,overflow:"hidden"}}})),rt=function(e){var t=e.children,n=nt();return(0,x.jsxs)("div",{className:n.root,children:[(0,x.jsx)(tt,{}),(0,x.jsx)("div",{className:n.container,children:t})]})},it=n(6344),ct=n(9062),ot=["children"];function at(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function st(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?at(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var lt=(0,r.createContext)({}),ut=function(e){var t=e.children,n=(0,l.Z)(e,ot),i=(0,r.useContext)(lt).loading;return(0,x.jsx)(lt.Provider,{value:st(st({},n),{},{loading:i||n.loading}),children:t})},dt=(0,f.ZP)(it.Z)((function(e){var t=e.theme;return{position:"absolute",background:t.palette.action.disabledBackground,zIndex:t.zIndex.modal}})),ht=function(){var e=(0,r.useContext)(lt).loading||!1;return e?(0,x.jsx)(dt,{transitionDuration:{enter:1e3},open:e,children:(0,x.jsx)(ct.Z,{})}):null},ft=(0,f.ZP)(H.Z)((function(e){var t=e.theme;return(0,u.Z)({},"&.".concat(se.Z.root),{display:"flex",justifyContent:"space-between",padding:t.spacing(4),backgroundColor:t.palette.grey[100]})})),xt=function(e){var t=e.children,n=(0,r.useContext)(te.J).connected;return(0,x.jsx)(ut,{loading:!1===n,children:(0,x.jsx)(lt.Consumer,{children:function(e){return e.loading?(0,x.jsx)(ht,{}):(0,x.jsx)(x.Fragment,{children:t})}})})},jt=function(){return(0,x.jsxs)(xt,{children:[(0,x.jsxs)(ft,{children:[(0,x.jsx)(we,{}),(0,x.jsx)(be,{}),(0,x.jsx)(Ve,{})]}),(0,x.jsx)(_.ZP,{container:!0,p:2,pb:0,spacing:2,children:(0,x.jsx)(oe,{})}),(0,x.jsxs)(_.ZP,{container:!0,p:2,spacing:2,children:[(0,x.jsx)(_.ZP,{item:!0,xs:6,children:(0,x.jsx)(Le,{})}),(0,x.jsx)(_.ZP,{item:!0,xs:6,children:(0,x.jsx)(Ye,{})})]})]})},pt=function(e){var t=e.children,n=(0,r.useContext)(te.J).connected;return(0,x.jsx)(ut,{loading:!1===n,children:(0,x.jsx)(lt.Consumer,{children:function(e){return e.loading?(0,x.jsx)(ht,{}):(0,x.jsx)(x.Fragment,{children:t})}})})},gt=function(){var e=(0,r.useRef)(null),t=(0,D.Qy)("server"),n=(0,r.useContext)(te.J).sendMessage,i=(0,r.useState)(null),c=i[0],o=i[1],a=(0,ae.ZP)(c,{reconnectAttempts:1/0,reconnectInterval:1e4}).lastMessage;(0,r.useEffect)((function(){return o(t?"ws://".concat(t,"/stream"):null),function(){o(null)}}),[t]);return(0,r.useEffect)((function(){if(e&&e.current){var t=e.current,r={x:0,y:0,mousedown:function(e){r.x=e.clientX,r.y=e.clientY},mouseup:function(i){if(r.x&&r.y)if(Math.abs(i.clientX-r.x)>10||Math.abs(i.clientY-r.y)>10){var c=t.getBoundingClientRect();!function(t,r,i,c){if(e&&e.current){var o=e.current,a=o.getContext("2d");"not-allowed"!==o.style.cursor&&(o.style.cursor="not-allowed",a&&(a.globalCompositeOperation="destination-out",a.fillStyle="rgba(255, 255, 255, 0.5)",a.beginPath(),a.fillRect(0,0,o.width,o.height),a.fill(),a.globalCompositeOperation="source-over"),n("swipeScreen",{x1:t,y1:r,x2:i,y2:c}))}}(r.x-c.left,r.y-c.top,i.clientX-c.left,i.clientY-c.top)}else{var o=t.getBoundingClientRect();!function(t,r){if(e&&e.current){var i=e.current,c=i.getContext("2d");"not-allowed"!==i.style.cursor&&(i.style.cursor="not-allowed",c&&(c.globalCompositeOperation="destination-out",c.fillStyle="rgba(255, 255, 255, 0.5)",c.beginPath(),c.fillRect(0,0,i.width,i.height),c.fill(),c.globalCompositeOperation="source-over"),n("touchScreen",{x:t,y:r}))}}(i.clientX-o.left,i.clientY-o.top)}r.x=0,r.y=0}};t.addEventListener("mousedown",r.mousedown),t.addEventListener("mouseup",r.mouseup),t.addEventListener("mouseleave",r.mouseup)}}),[e]),(0,r.useEffect)((function(){if(e&&e.current&&a){var t=e.current,n=t.getContext("2d"),r=new Image;r.src=URL.createObjectURL(a.data),r.onload=function(){t.width=r.width,t.height=r.height,t.style.cursor="auto",n&&n.drawImage(r,0,0),URL.revokeObjectURL(r.src)}}}),[e,a]),(0,x.jsx)(pt,{children:(0,x.jsx)("canvas",{ref:e})})},vt=n(5116),Zt=n(270),mt=n(6914);function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ot=function(){var e=(0,D.Aj)(),t=(0,M.Z)(e,2),n=t[0],i=t[1],c=(0,D.Qy)("server"),o=(0,r.useState)(""),a=o[0],s=o[1];(0,r.useEffect)((function(){c&&c!==a&&s(c)}),[c]);return n?(0,x.jsx)(_.ZP,{item:!0,xs:!0,children:(0,x.jsx)(q.Z,{fullWidth:!0,children:(0,x.jsx)(vt.Z,{label:"\u670d\u52a1\u5668\u5730\u5740",value:a,onChange:function(e){s(e.target.value)},InputProps:{endAdornment:(0,x.jsx)(Zt.Z,{position:"end",children:(0,x.jsx)(mt.Z,{onClick:function(){n&&i(yt(yt({},n),{},{server:a}))},children:"\u786e\u8ba4"})})}})})}):null},wt=function(){return(0,x.jsx)(_.ZP,{container:!0,p:2,spacing:2,children:(0,x.jsx)(Ot,{})})},Pt=function(){var e=(0,r.useState)(0),t=e[0],n=e[1];return(0,x.jsx)(rt,{children:(0,x.jsxs)(a.Z,{sx:{flexGrow:1,display:"flex"},children:[(0,x.jsxs)(s.Z,{orientation:"vertical",variant:"scrollable",value:t,onChange:function(e,t){n(t)},sx:{borderRight:1,borderColor:"divider",background:function(e){return e.palette.background.paper}},children:[(0,x.jsx)(m,{icon:(0,x.jsx)(i.Z,{}),title:"\u4eea\u8868\u76d8"}),(0,x.jsx)(m,{icon:(0,x.jsx)(c.Z,{}),title:"\u5c4f\u5e55"}),(0,x.jsx)(m,{icon:(0,x.jsx)(o.Z,{}),title:"\u8bbe\u7f6e"})]}),(0,x.jsx)(P,{value:t,index:0,children:(0,x.jsx)(jt,{})}),(0,x.jsx)(P,{value:t,index:1,children:(0,x.jsx)(gt,{})}),(0,x.jsx)(P,{value:t,index:2,children:(0,x.jsx)(wt,{})})]})})}},5301:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(1718)}])}},function(e){e.O(0,[809,242,774,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);