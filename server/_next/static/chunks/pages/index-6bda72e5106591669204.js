(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{1718:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Mn}});var r=t(7294),i=t(4433),c=t(6155),o=t(5683),a=t(1508),s=t(4656),l=t(219),u=t(2809),d=t(2658),f=t(2640),h=t(9602),x=t(5893),j=["icon","title"];function p(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function g(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?p(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Z=(0,h.ZP)(a.Z)((function(){return{display:"flex",flexDirection:"column",alignItems:"center"}})),v=(0,h.ZP)((function(e){return(0,x.jsx)(d.Z,g({variant:"caption"},e))}))((function(e){var n=e.theme;return{height:n.spacing(2),lineHeight:n.spacing(2),whiteSpace:"nowrap"}})),m=function(e){var n=e.icon,t=e.title,r=(0,l.Z)(e,j);return(0,x.jsx)(f.Z,g({label:(0,x.jsxs)(Z,{children:[n,(0,x.jsx)(v,{children:t})]})},r))},b=function(e){var n=e.validate,t=e.children;return n?(0,x.jsx)(x.Fragment,{children:t}):null},y=t(2618),O=((0,h.ZP)(y.Z)((function(){return{flex:1,width:"100%",height:"100%"}})),(0,h.ZP)(y.Z)((function(){return{flex:1,width:"100%",overflowY:"hidden"}})),(0,h.ZP)(y.Z)((function(){return{flex:1,height:"100%",overflowX:"hidden"}}))),w=(0,h.ZP)(a.Z)((function(){return(0,u.Z)({display:"flex",flexGrow:1},"&[hidden]",{display:"none"})})),P=function(e){var n=e.value,t=e.index,r=e.children;return(0,x.jsx)(w,{role:"tabpanel",hidden:n!==t,children:(0,x.jsx)(O,{children:(0,x.jsx)(b,{validate:n===t,children:r})})})},C=t(4235),S=t(3720),k=t(4386),E=t(6447),D=t(4422),I=t(3789),M=t(318),_=t(1987),H=t(558),N=t(8811),W=function(e){var n=e.name,t=(0,D.eH)("\u6b63\u5728\u6311\u6218\u7684boss"),r=(0,D.eH)(n);return(0,x.jsx)(_.Z,{sx:0===String(t).indexOf(n)?{background:function(e){return e.palette.secondary.light}}:{},children:(0,x.jsxs)(a.Z,{display:"flex",alignItems:"center",px:2,minHeight:48,children:[(0,x.jsx)(d.Z,{sx:{flex:1},children:n}),(0,x.jsx)(d.Z,{sx:{color:"text.secondary"},children:Number(r||0)})]})})},R=function(e){var n=e.name;return(0,x.jsx)(W,{name:n})},L=function(){var e=(0,N.useGlobalState)("boss-list",[]),n=(0,M.Z)(e,2),t=n[0],i=n[1],c=(0,D.eH)("\u6b63\u5728\u6311\u6218\u7684boss");return(0,r.useEffect)((function(){c&&"\u65e0"!==c&&!1===(t||[]).includes(c)&&i([].concat((0,I.Z)(t||[]),[c]))}),[c]),(0,x.jsx)(x.Fragment,{children:(t||[]).map((function(e){return(0,x.jsx)(H.ZP,{item:!0,xs:4,children:(0,x.jsx)(R,{name:e})},e)}))})},T=t(6571),A=t(3838),z=t(7645),J=t(7750),F=t(6446),U=t(476),X=t(165),G=t(542),Y=t(6965),B=t(5522),Q=t(6914),q=t(461),K=t(7425),V=t(1820),$=t(7720),ee=t(5092),ne=t(2440),te=t(576),re=t(4212),ie=t(8619),ce=t(9334),oe=t(8285),ae=function(e){var n=e.active,t=e.onClose,i=(0,r.useContext)(oe.J).sendMessage,c=(0,r.useState)(""),o=c[0],a=c[1],s=(0,r.useState)(""),l=s[0],d=s[1];(0,r.useEffect)((function(){if(n){var e=n[2],t=e.set,r=e.party;a(t||""),d(r||"")}}),[n]);return n?(0,x.jsxs)(A.Z,{maxWidth:"lg",fullWidth:!0,open:!0,children:[(0,x.jsx)(z.Z,{children:"\u961f\u4f0d\u9009\u62e9"}),(0,x.jsxs)(J.Z,{children:[(0,x.jsxs)(F.Z,{fullWidth:!0,children:[(0,x.jsx)(U.Z,{children:"SET"}),(0,x.jsx)(X.Z,{row:!0,value:o,onChange:function(e){a(e.target.value)},children:(0,I.Z)(new Array(6)).map((function(e,n){return(0,x.jsx)(G.Z,{value:n+1,control:(0,x.jsx)(Y.Z,{}),label:"".concat(n+1)},n)}))})]}),(0,x.jsxs)(F.Z,{fullWidth:!0,children:[(0,x.jsx)(U.Z,{children:"\u961f\u4f0d"}),(0,x.jsx)(X.Z,{row:!0,value:l,onChange:function(e){d(e.target.value)},children:(0,I.Z)(new Array(10)).map((function(e,n){return(0,x.jsx)(G.Z,{value:n+1,control:(0,x.jsx)(Y.Z,{}),label:"".concat(n+1)},n)}))})]})]}),(0,x.jsxs)(B.Z,{children:[(0,x.jsx)(Q.Z,{onClick:function(){if(n){var e=(0,M.Z)(n,2),r=e[0],c=e[1];i("mergeConfigSettings",{"\u94c3\u94db\u8bbe\u7f6e":(0,u.Z)({},r,(0,u.Z)({},c,{set:"",party:""}))}),t()}},children:"\u9ed8\u8ba4"}),(0,x.jsx)(Q.Z,{onClick:t,children:"\u53d6\u6d88"}),(0,x.jsx)(Q.Z,{onClick:function(){if(n&&o&&l){var e=(0,M.Z)(n,2),r=e[0],c=e[1];i("mergeConfigSettings",{"\u94c3\u94db\u8bbe\u7f6e":(0,u.Z)({},r,(0,u.Z)({},c,{set:o,party:l}))}),t()}},children:"\u786e\u5b9a"})]})]}):null},se=function(e){var n=e.name,t=(0,D.eH)("\u94c3\u94db\u8bbe\u7f6e"),i=(0,D.eH)("\u94c3\u94db\u8ba1\u6570"),c=(0,D.eH)("\u5f53\u524d\u94c3\u94db"),o=(0,r.useMemo)((function(){return i?Object.entries(t[n]).reduce((function(e,n){var t=(0,M.Z)(n,2),r=(t[0],t[1]);return e+(i[r.name]||0)}),0):0}),[t,c,i]),s=(0,r.useMemo)((function(){var e=Object.entries(t[n]).find((function(e){var n=(0,M.Z)(e,2);n[0];return n[1].name===c.name}));return e?(0,x.jsx)(q.Z,{color:"primary",size:"small",label:e[0]}):null}),[t,c]),l=(0,r.useMemo)((function(){return Object.entries(t[n]).find((function(e){var n=(0,M.Z)(e,2);n[0];return n[1].enabled}))}),[t]),u=(0,r.useMemo)((function(){return s?function(e){return e.palette.secondary.light}:void 0===l?function(e){return e.palette.grey[400]}:void 0}),[s,l]);return(0,x.jsxs)(K.Z,{expandIcon:(0,x.jsx)(T.Z,{}),sx:{background:u},children:[(0,x.jsx)(d.Z,{sx:{width:150,flexShrink:0},children:n}),(0,x.jsx)(d.Z,{sx:{flex:1,color:"text.secondary"},children:o}),(0,x.jsx)(a.Z,{sx:{width:80,textAlign:"center",mr:1},children:s})]})},le=function(e){var n=e.name,t=(0,r.useContext)(oe.J).sendMessage,i=(0,D.eH)("\u94c3\u94db\u8bbe\u7f6e"),c=(0,D.eH)("\u94c3\u94db\u8ba1\u6570"),o=(0,r.useState)(null),s=o[0],l=o[1],f=(0,r.useCallback)((function(e,r){return function(){t("mergeConfigSettings",{"\u94c3\u94db\u8bbe\u7f6e":(0,u.Z)({},n,(0,u.Z)({},e,{enabled:!r}))})}}),[n,i,t]),h=(0,r.useCallback)((function(e,t){return function(r){r.stopPropagation(),l([n,e,t])}}),[n,i,t]);return i[n]?(0,x.jsxs)(V.Z,{children:[(0,x.jsx)(se,{name:n}),(0,x.jsx)($.Z,{}),(0,x.jsx)(ee.Z,{sx:{p:1},children:(0,x.jsx)(ne.Z,{sx:{p:0,width:"100%",bgcolor:"background.paper"},children:Object.entries(i[n]).map((function(e){var n=(0,M.Z)(e,2),t=n[0],r=n[1],i=r.name,o=r.set,s=r.party,l=r.enabled,u=o&&s?"".concat(o,"-").concat(s):"\u9ed8\u8ba4";return(0,x.jsx)(te.ZP,{secondaryAction:(0,x.jsx)(re.Z,{edge:"end",onChange:f(t,l),checked:l}),disablePadding:!0,children:(0,x.jsx)(ie.Z,{sx:{pl:1},onClick:f(t,l),children:(0,x.jsx)(ce.Z,{primary:(0,x.jsxs)(a.Z,{display:"flex",alignItems:"center",children:[(0,x.jsx)(d.Z,{sx:{width:150,flexShrink:0},children:t}),(0,x.jsx)(d.Z,{sx:{flex:1,color:"text.secondary"},children:c?c[i]:""}),(0,x.jsx)(q.Z,{color:"primary",size:"small",label:u,onClick:h(t,r)})]})})})},i)}))})}),(0,x.jsx)(ae,{active:s,onClose:function(){l(null)}})]}):null},ue=function(){var e=(0,D.eH)("\u94c3\u94db\u8bbe\u7f6e");return(0,x.jsx)(x.Fragment,{children:Object.keys(e||{}).map((function(e){return(0,x.jsx)(H.ZP,{item:!0,xs:4,children:(0,x.jsx)(le,{name:e})},e)}))})},de=function(){var e=(0,D.eH)("\u94c3\u94db\u8bbe\u7f6e");return Object.keys(e||{}).length?(0,x.jsx)(ue,{}):(0,x.jsx)(L,{})},fe=t(7676),he=t(3160),xe=t(9041),je=t(8629),pe=["label"];function ge(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Ze(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ge(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ge(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ve=[255,158,25],me=[49,194,181],be=[49,53,49],ye=(0,h.ZP)(_.Z)((function(){return(0,u.Z)({},"&.".concat(he.Z.root),{display:"inline-flex"})})),Oe=(0,h.ZP)(a.Z)((function(e){var n=e.theme;return{display:"flex",flexDirection:"column",justifyContent:"space-evenly",padding:n.spacing(2),width:n.spacing(24)}})),we=(0,h.ZP)(xe.Z)((function(e){return{height:e.theme.spacing(1)}})),Pe=function(e){var n=e.label,t=(0,l.Z)(e,pe);return(0,x.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,x.jsx)(d.Z,{variant:"body2",noWrap:!0,children:n}),(0,x.jsx)(a.Z,{sx:{flex:1,mx:1},children:(0,x.jsx)(we,Ze({variant:"determinate"},t))}),void 0!==t.value&&t.value>=0&&(0,x.jsx)(d.Z,{variant:"caption",color:"text.secondary",children:"".concat(t.value,"%")})]})},Ce=function(){var e=(0,D.eH)("\u5f53\u524d\u94c3\u94db"),n=(0,D.Qy)("server"),t=(0,r.useState)(-1),i=t[0],c=t[1],o=(0,r.useState)(-1),a=o[0],s=o[1],l=(0,r.useState)(null),u=l[0],d=l[1],f=(0,fe.ZP)(u),h=f.lastMessage,j=f.getWebSocket,p=(0,r.useCallback)((function(){e&&"{}"!==JSON.stringify(e)||d(n?"ws://".concat(n,"/stream"):null)}),[e,n]);return(0,je.Z)(p,1e4,{immediate:!0}),(0,r.useEffect)((function(){if(h){var e=j();e&&e.close();var n=new Image;n.src=URL.createObjectURL(h.data),n.onload=function(){!function(e,n){var t=document.createElement("canvas"),r=t.getContext("2d");if(r){if(720===e.width&&1280===e.height)t.width=307,t.height=1,r.drawImage(e,95,23,t.width,t.height,0,0,t.width,t.height);else{if(810!==e.width||1440!==e.height)return;t.width=344,t.height=1,r.drawImage(e,107,26,t.width,t.height,0,0,t.width,t.height)}for(var i=r.getImageData(0,0,t.width,t.height),c={left:0,right:0},o=0;o<i.data.length;o+=4)if(i.data[o]===ve[0]&&i.data[o+1]===ve[1]&&i.data[o+2]===ve[2])c.left+=1;else{if(i.data[o]!==be[0]||i.data[o+1]!==be[1]||i.data[o+2]!==be[2])return;c.right+=1}n(Math.round(c.left/(c.left+c.right||1)*1e3)/10)}}(n,c),function(e,n){var t=document.createElement("canvas"),r=t.getContext("2d");if(r){if(720===e.width&&1280===e.height)t.width=92,t.height=92,r.drawImage(e,0,104,t.width,t.height,0,0,t.width,t.height);else{if(810!==e.width||1440!==e.height)return;t.width=102,t.height=102,r.drawImage(e,0,117,t.width,t.height,0,0,t.width,t.height)}for(var i=r.getImageData(0,0,t.width,t.height),c=t.width-2,o=Math.PI/c,a={left:0,right:0},s=0;s<=90;s+=1){var l=Math.round(Math.cos(s*o)*c),u=Math.round(Math.sin(s*o)*c);if(l>=0&&u>=0){var d=4*t.width*l+4*u;if(i.data[d]===me[0]&&i.data[d+1]===me[1]&&i.data[d+2]===me[2])a.left+=1;else{if(i.data[d]!==be[0]||i.data[d+1]!==be[1]||i.data[d+2]!==be[2])return;a.right+=1}}}n(Math.round(a.left/(a.left+a.right||1)*1e3)/10)}}(n,s),URL.revokeObjectURL(n.src)},d(null)}return function(){d(null)}}),[h]),(0,x.jsx)(ye,{children:(0,x.jsxs)(Oe,{children:[(0,x.jsx)(Pe,{label:"\u4f53\u529b",variant:i<0?"indeterminate":"determinate",color:i<100?"primary":"secondary",value:i}),(0,x.jsx)(Pe,{label:"\u7ecf\u9a8c",variant:a<0?"indeterminate":"determinate",color:a<100?"primary":"secondary",value:a})]})})},Se=t(3363),ke=t(5305),Ee=(0,h.ZP)(_.Z)((function(){return(0,u.Z)({},"&.".concat(he.Z.root),{display:"inline-flex"})})),De=(0,h.ZP)(a.Z)((function(e){var n=e.theme;return{display:"flex",flexDirection:"column",justifyContent:"space-between",padding:n.spacing(2),width:n.spacing(24)}})),Ie=function(){var e=(0,r.useContext)(oe.J).sendMessage,n=(0,D.eH)("currentTargets"),t=(0,D.Gd)(),i=(0,M.Z)(t,1)[0];return(0,x.jsx)(Ee,{children:(0,x.jsxs)(De,{children:[(0,x.jsx)(d.Z,{variant:"h6",children:"\u5f53\u524d\u4efb\u52a1"}),n&&i&&(0,x.jsx)(Se.Z,{size:"small",value:n,onChange:function(n){e("changeTargets",n.target.value)},children:i.map((function(e){return(0,x.jsx)(ke.Z,{value:e,children:e},e)}))})]})})},Me=t(3543),_e=t(9127),He=t(6878),Ne=function(){var e=(0,He.e)("isDebug"),n=(0,r.useMemo)((function(){return e||!1}),[e]);return(0,x.jsx)(b,{validate:n,children:(0,x.jsx)(_e.Z,{title:"\u8c03\u8bd5\u6a21\u5f0f",children:(0,x.jsx)(Me.Z,{})})})},We=t(4356),Re=t(6761),Le=t(5295),Te=t(8515),Ae=t(6867),ze=t(9490),Je=(0,h.ZP)(a.Z)((function(e){var n=e.theme;return{display:"flex",alignItems:"center",padding:n.spacing(0,1.5),borderWidth:"0 0 1px",borderStyle:"solid",borderColor:n.palette.divider}})),Fe=function(e){var n=e.index,t=e.style,r=(0,D.eM)(),i=(0,M.Z)(r,1)[0];if(i&&n<i.length){var c=i[n],o=c.time,a=c.message;return(0,x.jsx)(_e.Z,{title:ze.ou.fromSeconds(o).toLocaleString(ze.ou.DATETIME_MED_WITH_SECONDS),children:(0,x.jsx)(Je,{style:t,sx:n%2===0?{background:function(e){return e.palette.grey[100]}}:{},children:(0,x.jsx)(d.Z,{variant:"body2",noWrap:!0,children:a})},n)})}return null},Ue=function(){var e=(0,D.eM)(),n=(0,M.Z)(e,2),t=n[0],r=n[1];return(0,x.jsxs)(Le.Z,{children:[(0,x.jsx)(Te.Z,{action:(0,x.jsx)(_e.Z,{title:"\u6e05\u7a7a",children:(0,x.jsx)(Ae.Z,{onClick:function(){r([])},children:(0,x.jsx)(Re.Z,{})})}),title:"\u65e5\u5fd7"}),(0,x.jsx)($.Z,{}),(0,x.jsx)(We.t7,{className:"List",width:"100%",height:400,itemCount:t?t.length:0,itemSize:40,children:Fe})]})},Xe=t(8999),Ge=t(6634),Ye=["className"];function Be(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Qe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Be(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Be(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var qe=(0,h.ZP)(a.Z)((function(e){var n=e.theme;return{display:"flex",alignItems:"center",padding:n.spacing(0,1.5),borderWidth:"0 0 1px",borderStyle:"solid",borderColor:n.palette.divider}})),Ke=(0,h.ZP)((function(e){var n=e.className,t=(0,l.Z)(e,Ye);return(0,x.jsx)(_e.Z,Qe(Qe({},t),{},{classes:{popper:n}}))}))((0,u.Z)({},"& .".concat(Xe.Z.tooltip),{maxWidth:"none",maxHeight:400,whiteSpace:"pre",overflowY:"auto"})),Ve=function(e){return"object"===typeof e?(0,x.jsx)(Ke,{placement:"top",title:JSON.stringify(e,null,4),children:(0,x.jsx)(Ge.Z,{component:"button",variant:"body2",sx:{ml:1},children:"\u67e5\u770b"})}):(0,x.jsx)(a.Z,{ml:1,children:String(e)})},$e=function(e){var n=e.index,t=e.style,r=(0,D._y)(),i=(0,M.Z)(r,1)[0];if(i&&n<Object.keys(i).length){var c=Object.keys(i)[n];return(0,x.jsx)(qe,{style:t,sx:n%2===0?{background:function(e){return e.palette.grey[100]}}:{},children:(0,x.jsxs)(d.Z,{component:"div",variant:"body2",noWrap:!0,sx:{display:"flex"},children:[c,": ",Ve(i[c])]})},n)}return null},en=function(){var e=(0,D._y)(),n=(0,M.Z)(e,1)[0];return(0,x.jsxs)(Le.Z,{children:[(0,x.jsx)(Te.Z,{title:"\u6742\u9879"}),(0,x.jsx)($.Z,{}),(0,x.jsx)(We.t7,{className:"List",width:"100%",height:400,itemCount:Object.keys(n||{}).length,itemSize:40,children:$e})]})},nn=t(9149),tn=function(){var e=(0,r.useContext)(oe.J).sendMessage,n=(0,He.e)("isRunning"),t=(0,r.useMemo)((function(){return n||!1}),[n]),i=(0,r.useCallback)((function(n,t){e(t?"startWFHelper":"stopWFHelper")}),[e]);return(0,x.jsx)(_e.Z,{title:t?"\u542f\u7528":"\u6682\u505c",children:(0,x.jsx)(nn.Z,{color:"secondary",onChange:i,checked:t})})},rn=(0,h.ZP)(_.Z)((function(){return(0,u.Z)({},"&.".concat(he.Z.root),{display:"inline-flex"})})),cn=(0,h.ZP)(a.Z)((function(e){var n=e.theme;return{display:"flex",flexDirection:"column",justifyContent:"space-between",padding:n.spacing(2),width:n.spacing(24)}})),on=function(){var e=(0,He.e)("startTime"),n=(0,He.e)("lastActionTime"),t=(0,r.useState)(null),i=t[0],c=t[1],o=(0,r.useState)(null),a=o[0],s=o[1];return(0,je.Z)((function(){c((function(){return e?ze.ou.fromSeconds(Number(e)).toRelative():null})),s((function(){return n?ze.ou.fromSeconds(Number(n)).toRelative():null}))}),1e3,{immediate:!0}),(0,x.jsxs)(rn,{children:[(0,x.jsxs)(cn,{children:[(0,x.jsx)(d.Z,{variant:"h6",children:"\u5f00\u59cb\u65f6\u95f4"}),(0,x.jsx)(d.Z,{children:e?ze.ou.fromSeconds(Number(e)).toLocaleString(ze.ou.DATETIME_MED_WITH_SECONDS):"-"}),(0,x.jsx)(d.Z,{variant:"caption",sx:{mt:1},children:i||"-"})]}),(0,x.jsx)($.Z,{orientation:"vertical",flexItem:!0}),(0,x.jsxs)(cn,{children:[(0,x.jsx)(d.Z,{variant:"h6",children:"\u6d3b\u8dc3\u65f6\u95f4"}),(0,x.jsx)(d.Z,{children:n?ze.ou.fromSeconds(Number(n)).toLocaleString(ze.ou.DATETIME_MED_WITH_SECONDS):"-"}),(0,x.jsx)(d.Z,{variant:"caption",sx:{mt:1},children:a||"-"})]})]})},an=(0,h.ZP)(S.Z)((function(e){return{zIndex:e.theme.zIndex.drawer+1}})),sn=(0,h.ZP)(k.Z)((function(e){return{padding:e.theme.spacing(0,2)}})),ln=function(){return(0,x.jsx)(an,{position:"static",children:(0,x.jsxs)(sn,{disableGutters:!0,children:[(0,x.jsx)(d.Z,{variant:"h6",component:"div",sx:{flexGrow:1},children:"WFHelper"}),(0,x.jsxs)(E.Z,{direction:"row",alignItems:"center",spacing:2,children:[(0,x.jsx)(Ne,{}),(0,x.jsx)(tn,{})]})]})})},un=(0,C.Z)((function(e){return{root:{display:"flex",flexDirection:"column",backgroundColor:e.palette.background.default,minWidth:e.breakpoints.values.md,height:"100%"},container:{display:"flex",flex:1,overflow:"hidden"}}})),dn=function(e){var n=e.children,t=un();return(0,x.jsxs)("div",{className:t.root,children:[(0,x.jsx)(ln,{}),(0,x.jsx)("div",{className:t.container,children:n})]})},fn=t(4603),hn=t(9062),xn=["children"];function jn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function pn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?jn(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):jn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var gn=(0,r.createContext)({}),Zn=function(e){var n=e.children,t=(0,l.Z)(e,xn),i=(0,r.useContext)(gn).loading;return(0,x.jsx)(gn.Provider,{value:pn(pn({},t),{},{loading:i||t.loading}),children:n})},vn=(0,h.ZP)(fn.Z)((function(e){var n=e.theme;return{position:"absolute",background:n.palette.action.disabledBackground,zIndex:n.zIndex.modal}})),mn=function(){var e=(0,r.useContext)(gn).loading||!1;return e?(0,x.jsx)(vn,{transitionDuration:{enter:1e3},open:e,children:(0,x.jsx)(hn.Z,{})}):null},bn=(0,h.ZP)(_.Z)((function(e){var n=e.theme;return(0,u.Z)({},"&.".concat(he.Z.root),{display:"flex",justifyContent:"space-between",padding:n.spacing(4),backgroundColor:n.palette.grey[100]})})),yn=function(e){var n=e.children,t=(0,r.useContext)(oe.J).connected;return(0,x.jsx)(Zn,{loading:!1===t,children:(0,x.jsx)(gn.Consumer,{children:function(e){return e.loading?(0,x.jsx)(mn,{}):(0,x.jsx)(x.Fragment,{children:n})}})})},On=function(){return(0,x.jsxs)(yn,{children:[(0,x.jsxs)(bn,{children:[(0,x.jsx)(Ie,{}),(0,x.jsx)(Ce,{}),(0,x.jsx)(on,{})]}),(0,x.jsx)(H.ZP,{container:!0,p:2,pb:0,spacing:2,children:(0,x.jsx)(de,{})}),(0,x.jsxs)(H.ZP,{container:!0,p:2,spacing:2,children:[(0,x.jsx)(H.ZP,{item:!0,xs:6,children:(0,x.jsx)(Ue,{})}),(0,x.jsx)(H.ZP,{item:!0,xs:6,children:(0,x.jsx)(en,{})})]})]})},wn=function(e){var n=e.children,t=(0,r.useContext)(oe.J).connected;return(0,x.jsx)(Zn,{loading:!1===t,children:(0,x.jsx)(gn.Consumer,{children:function(e){return e.loading?(0,x.jsx)(mn,{}):(0,x.jsx)(x.Fragment,{children:n})}})})},Pn=function(){var e=(0,r.useRef)(null),n=(0,D.Qy)("server"),t=(0,r.useContext)(oe.J).sendMessage,i=(0,r.useState)(null),c=i[0],o=i[1],a=(0,fe.ZP)(c,{reconnectAttempts:1/0,reconnectInterval:1e4}).lastMessage;(0,r.useEffect)((function(){return o(n?"ws://".concat(n,"/stream"):null),function(){o(null)}}),[n]);return(0,r.useEffect)((function(){if(e&&e.current){var n=e.current,r={x:0,y:0,mousedown:function(e){r.x=e.clientX,r.y=e.clientY},mouseup:function(i){if(r.x&&r.y)if(Math.abs(i.clientX-r.x)>10||Math.abs(i.clientY-r.y)>10){var c=n.getBoundingClientRect();!function(n,r,i,c){if(e&&e.current){var o=e.current,a=o.getContext("2d");"not-allowed"!==o.style.cursor&&(o.style.cursor="not-allowed",a&&(a.globalCompositeOperation="destination-out",a.fillStyle="rgba(255, 255, 255, 0.5)",a.beginPath(),a.fillRect(0,0,o.width,o.height),a.fill(),a.globalCompositeOperation="source-over"),t("swipeScreen",{x1:n,y1:r,x2:i,y2:c}))}}(r.x-c.left,r.y-c.top,i.clientX-c.left,i.clientY-c.top)}else{var o=n.getBoundingClientRect();!function(n,r){if(e&&e.current){var i=e.current,c=i.getContext("2d");"not-allowed"!==i.style.cursor&&(i.style.cursor="not-allowed",c&&(c.globalCompositeOperation="destination-out",c.fillStyle="rgba(255, 255, 255, 0.5)",c.beginPath(),c.fillRect(0,0,i.width,i.height),c.fill(),c.globalCompositeOperation="source-over"),t("touchScreen",{x:n,y:r}))}}(i.clientX-o.left,i.clientY-o.top)}r.x=0,r.y=0}};n.addEventListener("mousedown",r.mousedown),n.addEventListener("mouseup",r.mouseup),n.addEventListener("mouseleave",r.mouseup)}}),[e]),(0,r.useEffect)((function(){if(e&&e.current&&a){var n=e.current,t=n.getContext("2d"),r=new Image;r.src=URL.createObjectURL(a.data),r.onload=function(){n.width=r.width,n.height=r.height,n.style.cursor="auto",t&&t.drawImage(r,0,0),URL.revokeObjectURL(r.src)}}}),[e,a]),(0,x.jsx)(wn,{children:(0,x.jsx)("canvas",{ref:e})})},Cn=t(1559),Sn=t(270);function kn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function En(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?kn(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):kn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Dn=function(){var e=(0,D.Aj)(),n=(0,M.Z)(e,2),t=n[0],i=n[1],c=(0,D.Qy)("server"),o=(0,r.useState)(""),a=o[0],s=o[1];(0,r.useEffect)((function(){c&&c!==a&&s(c)}),[c]);return t?(0,x.jsx)(H.ZP,{item:!0,xs:!0,children:(0,x.jsx)(F.Z,{fullWidth:!0,children:(0,x.jsx)(Cn.Z,{label:"\u670d\u52a1\u5668\u5730\u5740",value:a,onChange:function(e){s(e.target.value)},InputProps:{endAdornment:(0,x.jsx)(Sn.Z,{position:"end",children:(0,x.jsx)(Q.Z,{onClick:function(){t&&i(En(En({},t),{},{server:a}))},children:"\u786e\u8ba4"})})}})})}):null},In=function(){return(0,x.jsx)(H.ZP,{container:!0,p:2,spacing:2,children:(0,x.jsx)(Dn,{})})},Mn=function(){var e=(0,r.useState)(0),n=e[0],t=e[1];return(0,x.jsx)(dn,{children:(0,x.jsxs)(a.Z,{sx:{flexGrow:1,display:"flex"},children:[(0,x.jsxs)(s.Z,{orientation:"vertical",variant:"scrollable",value:n,onChange:function(e,n){t(n)},sx:{borderRight:1,borderColor:"divider",background:function(e){return e.palette.background.paper}},children:[(0,x.jsx)(m,{icon:(0,x.jsx)(i.Z,{}),title:"\u4eea\u8868\u76d8"}),(0,x.jsx)(m,{icon:(0,x.jsx)(c.Z,{}),title:"\u5c4f\u5e55"}),(0,x.jsx)(m,{icon:(0,x.jsx)(o.Z,{}),title:"\u8bbe\u7f6e"})]}),(0,x.jsx)(P,{value:n,index:0,children:(0,x.jsx)(On,{})}),(0,x.jsx)(P,{value:n,index:1,children:(0,x.jsx)(Pn,{})}),(0,x.jsx)(P,{value:n,index:2,children:(0,x.jsx)(In,{})})]})})}},5301:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(1718)}])}},function(e){e.O(0,[809,740,774,888,179],(function(){return n=5301,e(e.s=n);var n}));var n=e.O();_N_E=n}]);